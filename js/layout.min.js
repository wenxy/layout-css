$(document).ready(function(){$(".f-ly-init").show();Layout.setW();Layout.setPopBox();Layout.setMenu();Layout.setColumn();Layout.setRelativeAdv();Layout.setShow();Layout.setTab();Layout.setOverPulse();Layout.setBgChangeMouseOver()});$(window).resize(function(){$(".f-ly-init").show();Layout.setW();Layout.setPopBox();Layout.setMenu();Layout.setColumn();Layout.setRelativeAdv();Layout.setShow()});var Conf={debug:function(){return true},nothing:function(){}};var w;var Layout={setW:function(){w=$(window).outerWidth(true);if(typeof(maxW)=="undefined"){maxW=480;if(maxW!=-1&&w>maxW){$("body").css("max-width",maxW+"px");$("body").css("margin","auto");w=maxW}}},setPopBox:function(){if($(".f-pop-1").length>0){var b=w-40;b=w>400?360:b;$(".f-pop-1").css("width",b);$(".f-pop-1").css("margin-left",Math.floor(b/2)*-1);var c=$(".f-pop-btn").length;var a=$(".f-pop-line").outerWidth();var d=Math.floor(a/c);$(".f-pop-btn").css("width",d);$(".f-pop-btn").css("float","left");$(".f-pop-1").addClass("animated fadeIn")}$(".f-ly-mask").unbind("click");$(".f-ly-mask").click(function(){$(".f-ly-mask").hide();$(".f-pop-1").hide()})},setMenu:function(){if($(".f-ly-menu").length>0&&$(".f-menu-click").length>0){$(".f-menu-click").unbind("click");$(".f-menu-click").click(function(){if($(".f-ly-menu").length>0){if($(".f-ly-menu").css("display")=="none"){$(".f-ly-menu").show()}else{if($(".f-ly-menu").css("display")=="block"){$(".f-ly-menu").hide()}}}})}},setColumn:function(){if($(".f-ly-column").length>0){$(".f-ly-column").each(function(c,b){var e=Layout.getMPB(b);var d=0;$(b).find("div[col]").each(function(g,i){var h=$(i).attr("col");if(h.indexOf("px")!=-1){d+=parseInt(h)}});var f=$(b).width()>=w?w:$(b).width();var a=f=0?w:f-e[0][1]-e[0][3]-e[1][1]-e[1][3]-e[2][1]-e[2][3]-d;Log.d(this,"mpb->",e,"the row width:",f);$(b).find("div[col]").each(function(g,i){var h=$(i).attr("col");var j=function(){var l=Layout.getMPB(i);if(h.indexOf("px")!=-1){var m=parseInt(h)-l[0][1]-l[0][3]-l[1][1]-l[1][3]-l[2][1]-l[2][3];Log.d(b,"child fix width",m);$(i).css("width",m)}else{var k=Math.floor(parseInt(h)/100*a-l[0][1]-l[0][3]-l[1][1]-l[1][3]-l[2][1]-l[2][3]);Log.d(b,"child % width",k);$(i).css("width",k)}};j();$(b).resize(function(){j()})})})}},setRelativeAdv:function(){var a=function(c,f,g){var h=$(f).attr(c);if(typeof(h)=="undefined"){return 0}var e=h.split(">");if(e.length==2){var d=isNaN(parseInt(e[1]))?0:parseInt(e[1]);var j=$("[rid="+e[0]+"]");var i=0;if(c=="left"||c=="right"){i=j.outerWidth(true)}else{if(c=="top"||c=="bottom"){i=j.outerHeight(true)}}return i+d+a(c,j)}if(e.length==1){return isNaN(parseInt(e[0]))?0:parseInt(e[0])}return 0};var b=$(".f-ly-relative");if(typeof(b)!="undefined"&&b.length>0){$(b).each(function(d,e){var h=$(this).attr("height")?parseInt($(e).attr("height")):0;if(h==0){var c=new Array();var f=$(this).children();for(var l=f.length-1;l>=0;l--){var k=isNaN(parseInt($(f[l]).attr("col")))?0:parseInt($(f[l]).attr("col"))-1;var g=a("top",$(f[l]),this);Log.d(e,l,g);var j=$(f[l]).attr("bottom")?parseInt($(f[l]).attr("bottom")):0;if(c[k]){if($(f[l]).outerHeight()+g+j>c[k]){c[k]=$(f[l]).outerHeight()+g+j}}Log.d(e,"子元素["+l+"]高度",$(f[l]).outerHeight(),"marginTop",g,"marginBottom",j,$(f[l]));c.push($(f[l]).outerHeight()+g+j)}Log.d(e,"计算relativie高度",c);h=c[0];$.each(c,function(m,n){if(n>h){h=n}})}$(e).css("height",h);$(e).children().each(function(v,o){$(o).css("position","absolute");var r=$(o).outerHeight();var s=a("top",o,this);var u=a("right",o,this);var m=a("bottom",o,this);var p=a("left",o,this);if($(o).attr("v")&&$(o).attr("v")=="middle"){s=Math.floor((h-r)/2);$(o).css("top",s)}else{if($(o).attr("v")&&$(o).attr("v")=="top"){$(o).css("top",0)}else{if($(o).attr("v")&&$(o).attr("v")=="bottom"){$(o).css("bottom",0)}else{if($(o).attr("top")){$(o).css("top",s)}if($(o).attr("bottom")){$(o).css("bottom",m)}}}}if($(o).attr("h")&&$(o).attr("h")=="center"){p=Math.floor(($(e).width()-$(o).width())/2);$(o).css("left",p)}else{if($(o).attr("h")&&$(o).attr("h")=="left"){$(o).css("left",0)}else{if($(o).attr("h")&&$(o).attr("h")=="right"){$(o).css("right",0)}else{if($(o).attr("left")){$(o).css("left",p)}if($(o).attr("right")){$(o).css("right",u)}}}}var n=Layout.getMPB(e);var i=Layout.getMPB(o);var t=n[0][0]+n[0][2]+n[1][0]+n[1][2]+n[2][0]+n[2][2]+i[0][0]+i[0][2]+i[1][0]+i[1][2]+i[2][0]+i[2][2];var q=n[0][1]+n[0][3]+n[1][1]+n[1][3]+n[2][1]+n[2][3]+i[0][1]+i[0][3]+i[1][1]+i[1][3]+i[2][1]+i[2][3];if($(o).attr("top")&&$(o).attr("bottom")){$(o).css("height",h-s-m-t)}if($(o).attr("left")&&$(o).attr("right")){$(o).css("width",w-p-u-q)}})})}},setShow:function(){$(".f-ly-init").hide()},setTab:function(){if($(".f-tab").length==0){return}var b=48;var a=$(".f-tab-menu-box").attr("height")?parseInt($(".f-tab-menu-box").attr("height")):b;var c=parseInt($(".f-tab-main-box").css("borderTopWidth"));$(".f-tab-menu-box").css("height",a+c);$(".f-tab-main-box").css("margin-top",c*-1);$(".f-tab-menu li").css("height",a);if(!$(".f-tab-menu>li").attr("lineHeight")){$(".f-tab-menu>li").css("line-height",(a-1)+"px")}else{$(".f-tab-menu>li").css("line-height",$(".f-tab-menu li").attr("lineHeight")+"px")}$(".f-tab").each(function(e,h){var g=$(this).find(".f-tab-main-box .f-tab-main>div");g.css("display","none");$(g[0]).css("display","block");var d=$(this).find(".f-tab-menu>li");var f=$(this).attr("mouse-event");if(d.length==1){d.css("cursor","default");$(d[0]).children().css("cursor","default");return}d.each(function(j,i){if(f=="mouseover"){$(this).unbind("mouseover");$(this).mouseover(function(){var k=parseInt($(this).attr("index"));if(k==-1){return}g.css("display","none");d.removeClass("hover");$(d[k]).addClass("hover");$(g[k]).css("display","block");$(g[k]).addClass("animated fadeIn")})}else{if(f=="click"){$(this).unbind("click");$(this).click(function(){var k=parseInt($(this).attr("index"));if(k==-1){return}g.css("display","none");d.removeClass("hover");$(d[k]).addClass("hover");$(g[k]).css("display","block");$(g[k]).addClass("animated fadeIn")})}}})})},getMPB:function(d){var a=isNaN(parseInt($(d).css("marginTop")))?0:parseInt($(d).css("marginTop"));var j=isNaN(parseInt($(d).css("marginBottom")))?0:parseInt($(d).css("marginBottom"));var g=isNaN(parseInt($(d).css("marginLeft")))?0:parseInt($(d).css("marginLeft"));var c=isNaN(parseInt($(d).css("marginRight")))?0:parseInt($(d).css("marginRight"));var m=isNaN(parseInt($(d).css("paddingTop")))?0:parseInt($(d).css("paddingTop"));var i=isNaN(parseInt($(d).css("paddingBottom")))?0:parseInt($(d).css("paddingBottom"));var f=isNaN(parseInt($(d).css("paddingLeft")))?0:parseInt($(d).css("paddingLeft"));var b=isNaN(parseInt($(d).css("paddingRight")))?0:parseInt($(d).css("paddingRight"));var k=isNaN(parseInt($(d).css("borderTopWidth")))?0:parseInt($(d).css("borderTopWidth"));var h=isNaN(parseInt($(d).css("borderBottomWidth")))?0:parseInt($(d).css("borderBottomWidth"));var e=isNaN(parseInt($(d).css("borderLeftWidth")))?0:parseInt($(d).css("borderLeftWidth"));var l=isNaN(parseInt($(d).css("borderRightWidth")))?0:parseInt($(d).css("borderRightWidth"));return[[a,c,j,g],[m,b,i,f],[k,l,h,e]]},setOverPulse:function(){if($(".over-pulse").length<=0){return}$(".over-pulse").unbind("mouseover");$(".over-pulse").unbind("mouseout");$(".over-pulse").mouseover(function(){$(this).addClass("animated pulse")});$(".over-pulse").mouseout(function(){$(this).removeClass("animated pulse")})},setBgChangeMouseOver:function(){if($(".f-bg-change-mo").length>0){$(".f-bg-change-mo").unbind("mousemove");$(".f-bg-change-mo").unbind("mouseout");$(".f-bg-change-mo").mousemove(function(){$(this).addClass("f-mo-bg")});$(".f-bg-change-mo").mouseout(function(){$(this).removeClass("f-mo-bg")})}},noting:function(){}};var Log={d:function(b){if(!Conf.debug()){return}if(typeof(console)!="undefined"&&$(b).attr("debug")){var a=$(b).attr("debug");console.log(a,"->",arguments)}},noting:function(){}};